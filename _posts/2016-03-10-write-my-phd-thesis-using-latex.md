---
layout: post
title: 用LaTeX写博士论文
date: 2016-03-10 14:00:00
category: 学术
tags: [论文, LaTeX, OS X]
---

这两天完成了自然科学基金申请的事情，开始准备写博士学位论文。这是第一次用LaTeX写中文论文，首先需要搭建一个写作环境。

<!--more-->

北大官方对研究生学位论文提供了一个写作指南和一个PDF格式的样例，但并没有提供写作时用的模板，Word和LaTeX的都没有。
每一届毕业生写论文时都会从上一届继承一个写作环境。在信息学院，我了解到有的硕士论文是用Word写的，但所有博士论文都是用LaTeX写的。
我也准备用LaTeX写。

我从前人那里拿到了好几个博士论文的LaTeX模板，其中没有一个让我特别满意的。可以看出有的模板最早从清华传过来，经历了几代人的修改，已经繁复不堪；有的模板是从工学院引进的，其格式与官方样例并不一致，原因无从考究。
这些模板也没有说明文档，使用者需要自己搞清楚应该安装什么工具、应该如何配置和编译。由于缺乏集中的维护者，每一届用户都可能在其中加入自己定制的东西，然后传给下一届。这样的传播只会使这些模板越来越难用。
到我手里，我已经懒得去折腾它们了。旧的字符编码（不支持UTF-8），丑陋的目录结构和文件名，搞不清楚作用的文字内容……总之我需要一个更好的选择。

这时我搜到了[pkuthss](https://github.com/CasperVector/pkuthss)。这是一个有人在开发和维护的北大学位论文LaTeX模板。
这个模板各方面都不错，不存在上面提到的种种问题。它的文档类已经[发布到CTAN](http://www.ctan.org/pkg/pkuthss)，可以直接通过TeX包管理系统来安装使用。
根据其文档和样例能够很快就搞定环境搭建和编译配置，非常容易上手。我选择了它作为我的博士论文写作模板。

我在使用pkuthss的过程中遇到了两个较大的问题，下面分别说一下。

首先是参考文献的格式。pkuthss的作者自己写了一个参考文献的样式规范（[也发布到了CTAN](http://www.ctan.org/pkg/biblatex-caspervector)），并在论文模板中使用了这个样式规范。可惜的是，按这个样式规范所排版出来的格式与北大学位论文写作指南里规定的格式差别太明显。
为了增加不必要的麻烦，我没有使用这套新的样式规范，而是借用了前人模板中的参考文献样式规范。由于两套样式规范的使用方法不同，需要做一些适配工作。

其次是OS X上的字体问题。pkuthss使用[CTeX](http://www.ctex.org/)来进行中文排版，并自定义了一个称为“pkuthss”的字体集（fontset）来指定排版所用的各种字体。我尝试在OS X上编译的时候却因为找不到字体而无法生成最终的PDF文件。经过一番探索，我最终将所用的字体集改为了CTeX内置的一个称为“mac”的字体集，并改用`xelatex`来编译（在Windows上用的是`pdflatex`），这样的组合可以成功生成PDF。

趁着这次机会，我把在Windows上用的TeX分发包由原来的[MiKTeX](http://www.miktex.org/)换成了[TeX Live](http://www.tug.org/texlive/)，这样就和OS X上的[MacTeX](/posts/tex-latex-and-mactex)一致了。
同样是为了跨平台，我也把在OS X上用的TeX前端从[TeXShop](http://pages.uoregon.edu/koch/texshop/)换成了[TeXstudio](http://texstudio.sourceforge.net/)。我在[2013年说过](/posts/tex-latex-and-mactex)TeXstudio的Mac版体验并不好，但现在发现它已经进步了很多。

一切准备妥当，后面就可以专注于论文内容了。
